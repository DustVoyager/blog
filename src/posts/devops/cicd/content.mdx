---
title: "CI/CD 파이프라인 구축 완벽 가이드"
desc: 지속적 통합과 지속적 배포의 개념부터 실전 구축까지, 현대적인 개발 워크플로우 완성하기
date: 2026-02-06
thumbnail: /posts/devops.png
---

![](/posts/cicd.png)

# CI/CD 파이프라인 구축 완벽 가이드

CI/CD는 현대 소프트웨어 개발의 핵심 방법론입니다. 코드 변경사항을 자동으로 빌드, 테스트, 배포함으로써 개발 속도를 높이고 품질을 보장할 수 있습니다. 이 글에서는 CI/CD의 개념부터 실전 구축 방법까지 상세히 다룹니다.

## 1. CI/CD란?

### 1.1 CI (Continuous Integration, 지속적 통합)

개발자들이 코드 변경사항을 정기적으로 메인 브랜치에 통합하고, 자동으로 빌드 및 테스트를 실행하는 개발 방식입니다.

**핵심 원칙:**
- 빈번한 코드 통합 (하루에 여러 번)
- 자동화된 빌드
- 자동화된 테스트
- 빠른 피드백

### 1.2 CD (Continuous Deployment/Delivery, 지속적 배포/전달)

**Continuous Delivery (지속적 전달):**
- 코드 변경사항을 자동으로 빌드하고 테스트
- 프로덕션 배포 준비 완료 상태 유지
- 수동 승인 후 배포

**Continuous Deployment (지속적 배포):**
- 모든 변경사항을 자동으로 프로덕션에 배포
- 수동 개입 없이 완전 자동화
- 높은 자동화 수준 요구

![](/posts/cicd-pipeline.png)

---

## 2. CI/CD가 필요한 이유

### 2.1 개발 생산성 향상

- **자동화된 반복 작업**: 수동 빌드/배포 시간 절약
- **빠른 피드백 루프**: 문제를 조기에 발견
- **개발자 집중도 향상**: 가치 있는 작업에 집중

### 2.2 코드 품질 보장

- **자동 테스트**: 모든 코드 변경사항 검증
- **일관된 빌드**: 환경에 따른 차이 제거
- **코드 리뷰 프로세스**: 통합된 품질 검사

### 2.3 배포 리스크 감소

- **작은 단위 배포**: 롤백 용이
- **환경 일관성**: 개발/스테이징/프로덕션 동일
- **신속한 장애 대응**: 자동 롤백 및 복구

### 2.4 비즈니스 가치

- **빠른 출시**: 기능을 빠르게 사용자에게 전달
- **경쟁력 향상**: 시장 변화에 신속 대응
- **고객 만족도**: 안정적인 서비스 제공

---

## 3. CI/CD 파이프라인 단계

### 3.1 전체 파이프라인 흐름

```
코드 커밋 → 소스 관리 → 빌드 → 테스트 → 배포 → 모니터링
```

### 3.2 각 단계 상세 설명

**1단계: 소스 관리 (Source Control)**
```yaml
# Git 브랜치 전략 예시
main        # 프로덕션
├── develop  # 개발 통합
│   ├── feature/login    # 기능 개발
│   ├── feature/payment  # 기능 개발
│   └── hotfix/bug-123   # 긴급 수정
```

**2단계: 빌드 (Build)**
```yaml
build:
  stage: build
  script:
    - npm ci
    - npm run build
  artifacts:
    paths:
      - dist/
```

**3단계: 테스트 (Test)**
```yaml
test:
  stage: test
  parallel:
    matrix:
      - TEST_TYPE: [unit, integration, e2e]
  script:
    - npm run test:$TEST_TYPE
  coverage: '/Lines\s*:\s*(\d+\.\d+)%/'
```

**4단계: 배포 (Deploy)**
```yaml
deploy:
  stage: deploy
  script:
    - npm run deploy:prod
  environment:
    name: production
    url: https://example.com
  only:
    - main
```

**5단계: 모니터링 (Monitor)**
```yaml
# 배포 후 헬스체크
monitor:
  stage: monitor
  script:
    - curl -f https://example.com/health || exit 1
    - npm run smoke-test
```

![](/posts/cicd-stages.png)

---

## 4. 실전 구축: GitHub Actions 활용

### 4.1 기본 CI 파이프라인

```yaml
# .github/workflows/ci.yml
name: CI Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  quality-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Node.js 설정
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: 의존성 설치
        run: npm ci

      - name: 코드 품질 검사
        run: |
          npm run lint
          npm run type-check

      - name: 단위 테스트
        run: npm run test:unit

      - name: 통합 테스트
        run: npm run test:integration

      - name: 테스트 커버리지
        uses: codecov/codecov-action@v3

  build:
    needs: quality-check
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Node.js 설정
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: 의존성 설치
        run: npm ci

      - name: 빌드
        run: npm run build

      - name: 빌드 결과물 업로드
        uses: actions/upload-artifact@v3
        with:
          name: build-files
          path: dist/
          retention-days: 7
```

### 4.2 완전한 CD 파이프라인

```yaml
# .github/workflows/cd.yml
name: CD Pipeline

on:
  push:
    branches: [main]

jobs:
  deploy-staging:
    runs-on: ubuntu-latest
    environment:
      name: staging
      url: https://staging.example.com

    steps:
      - uses: actions/checkout@v4

      - name: Node.js 설정
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: 의존성 설치
        run: npm ci

      - name: 빌드
        run: npm run build
        env:
          NODE_ENV: production
          VITE_API_URL: ${{ secrets.STAGING_API_URL }}

      - name: 스테이징 배포
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ap-northeast-2

      - name: S3 동기화
        run: |
          aws s3 sync ./dist s3://staging-bucket --delete
          aws cloudfront create-invalidation --distribution-id ${{ secrets.STAGING_CF_ID }} --paths "/*"

      - name: 스모크 테스트
        run: npm run test:smoke -- --url=https://staging.example.com

  deploy-production:
    needs: deploy-staging
    runs-on: ubuntu-latest
    environment:
      name: production
      url: https://example.com

    steps:
      - uses: actions/checkout@v4

      - name: Node.js 설정
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: 의존성 설치
        run: npm ci

      - name: 빌드
        run: npm run build
        env:
          NODE_ENV: production
          VITE_API_URL: ${{ secrets.PROD_API_URL }}

      - name: 프로덕션 배포
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ap-northeast-2

      - name: Blue-Green 배포
        run: |
          # 새 버전 배포
          aws s3 sync ./dist s3://prod-bucket-green --delete

          # 헬스체크
          npm run test:smoke -- --url=https://green.example.com

          # 트래픽 전환
          aws elbv2 modify-rule --rule-arn ${{ secrets.ALB_RULE_ARN }} --actions Type=forward,TargetGroupArn=${{ secrets.GREEN_TG_ARN }}

      - name: Slack 알림
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          text: '프로덕션 배포 완료!'
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}
        if: always()
```

---

## 5. 다양한 배포 전략

### 5.1 블루-그린 배포 (Blue-Green Deployment)

두 개의 동일한 프로덕션 환경을 유지하며 전환하는 방식입니다.

```yaml
deploy-blue-green:
  steps:
    - name: Green 환경에 배포
      run: |
        aws ecs update-service --cluster prod --service app-green --task-definition app:latest

    - name: Green 헬스체크
      run: |
        for i in {1..30}; do
          if curl -f https://green.example.com/health; then
            echo "Green 환경 정상"
            break
          fi
          sleep 10
        done

    - name: 트래픽 전환
      run: |
        aws elbv2 modify-listener --listener-arn $LISTENER_ARN --default-actions Type=forward,TargetGroupArn=$GREEN_TG_ARN
```

**장점:**
- 즉각적인 롤백 가능
- 다운타임 제로
- 충분한 테스트 시간

**단점:**
- 비용 증가 (2배 리소스)
- 데이터베이스 마이그레이션 복잡

### 5.2 카나리 배포 (Canary Deployment)

일부 사용자에게만 먼저 배포하여 검증하는 방식입니다.

```yaml
deploy-canary:
  steps:
    - name: 10% 트래픽으로 배포
      run: |
        kubectl set image deployment/app app=myapp:$VERSION
        kubectl scale deployment/app --replicas=1

    - name: 메트릭 모니터링
      run: |
        sleep 600  # 10분 대기
        ERROR_RATE=$(curl -s https://monitoring.example.com/api/error-rate)
        if [ "$ERROR_RATE" -gt "1" ]; then
          echo "에러율 초과, 롤백"
          exit 1
        fi

    - name: 전체 배포
      run: kubectl scale deployment/app --replicas=10
```

**장점:**
- 리스크 최소화
- 점진적 검증
- A/B 테스트 가능

**단점:**
- 구현 복잡도
- 모니터링 필수

### 5.3 롤링 배포 (Rolling Deployment)

순차적으로 인스턴스를 교체하는 방식입니다.

```yaml
deploy-rolling:
  steps:
    - name: 롤링 업데이트
      run: |
        kubectl set image deployment/app app=myapp:$VERSION
        kubectl rollout status deployment/app

    - name: 롤백 (필요시)
      if: failure()
      run: kubectl rollout undo deployment/app
```

**장점:**
- 추가 리소스 불필요
- 간단한 구현
- 점진적 배포

**단점:**
- 일시적 버전 혼재
- 롤백 시간 필요

![](/posts/deployment-strategies.png)

---

## 6. 모범 사례

### 6.1 브랜치 전략

**Git Flow**
```
main (프로덕션)
  └── develop (개발 통합)
        ├── feature/* (기능 개발)
        ├── release/* (릴리즈 준비)
        └── hotfix/* (긴급 수정)
```

**Trunk-Based Development**
```
main (항상 배포 가능)
  ├── feature-flags (기능 토글)
  └── short-lived branches (1-2일)
```

### 6.2 환경 관리

```yaml
# 환경별 설정 분리
environments:
  development:
    url: https://dev.example.com
    auto_deploy: true

  staging:
    url: https://staging.example.com
    auto_deploy: true
    requires_approval: false

  production:
    url: https://example.com
    auto_deploy: false
    requires_approval: true
```

### 6.3 시크릿 관리

```yaml
# GitHub Secrets 활용
- name: 환경 변수 설정
  env:
    DATABASE_URL: ${{ secrets.DATABASE_URL }}
    API_KEY: ${{ secrets.API_KEY }}
    JWT_SECRET: ${{ secrets.JWT_SECRET }}
  run: npm run deploy
```

### 6.4 테스트 전략

```yaml
tests:
  - unit: "빠른 피드백 (< 5분)"
  - integration: "API/DB 통합 (< 15분)"
  - e2e: "실제 사용자 시나리오 (< 30분)"
  - smoke: "배포 후 핵심 기능 검증 (< 5분)"
  - performance: "부하 테스트 (주기적)"
```

### 6.5 모니터링 및 알림

```yaml
monitoring:
  - name: 에러 추적
    tool: Sentry

  - name: 성능 모니터링
    tool: Datadog

  - name: 로그 수집
    tool: CloudWatch

  - name: 알림
    channels:
      - Slack
      - Email
      - PagerDuty
```

---

## 7. 트러블슈팅

### 7.1 빌드 실패

```yaml
- name: 빌드 캐시 정리
  run: |
    rm -rf node_modules
    rm -rf .next
    npm cache clean --force
    npm ci
```

### 7.2 테스트 불안정

```yaml
- name: 재시도 로직
  uses: nick-invision/retry@v2
  with:
    timeout_minutes: 10
    max_attempts: 3
    command: npm run test:e2e
```

### 7.3 배포 롤백

```yaml
- name: 자동 롤백
  if: failure()
  run: |
    echo "배포 실패, 이전 버전으로 롤백"
    aws s3 sync s3://backup-bucket s3://prod-bucket
    aws cloudfront create-invalidation --distribution-id $CF_ID --paths "/*"
```

---

## 8. CI/CD 도구 비교

| 도구 | 장점 | 단점 | 적합한 경우 |
|------|------|------|-------------|
| **GitHub Actions** | GitHub 통합, 무료 | 실행 시간 제한 | GitHub 사용 프로젝트 |
| **GitLab CI/CD** | 완전한 DevOps, 자체 호스팅 | 러닝커브 | GitLab 사용 |
| **Jenkins** | 유연성, 플러그인 | 관리 부담 | 온프레미스 환경 |
| **CircleCI** | 빠른 속도, 쉬운 설정 | 유료 | 중소 규모 팀 |
| **Travis CI** | 간단한 설정 | 느린 빌드 | 오픈소스 프로젝트 |

---

## 9. 마무리

CI/CD는 현대 소프트웨어 개발의 필수 요소입니다. 초기 설정은 시간이 걸리지만, 장기적으로 개발 생산성과 코드 품질을 크게 향상시킵니다. 작은 프로젝트라도 기본적인 CI부터 시작하여 점진적으로 CD로 확장해 나가는 것을 권장합니다.

**시작 단계:**
1. 자동화된 테스트 작성
2. 간단한 CI 파이프라인 구축
3. 스테이징 환경 구성
4. 자동 배포 도입
5. 모니터링 및 개선

## Reference

- [GitHub Actions 문서](https://docs.github.com/en/actions)
- [GitLab CI/CD 문서](https://docs.gitlab.com/ee/ci/)
- [The DevOps Handbook](https://itrevolution.com/product/the-devops-handbook/)
- [Continuous Delivery](https://continuousdelivery.com/)
